webpackJsonp([4],{YQni:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Recent=t.UserInfo=void 0;var r=n("1n8/"),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n("1cmS"),c=n("obMO"),i=n("rw4d"),u=a.Tabs.TabPane,s=function(e){return o.default.createElement("div",{className:"user"},o.default.createElement("img",{src:e.avatar_url,className:"user-view-avator",alt:e.loginname}),"用户名: ",e.loginname,o.default.createElement("span",null,o.default.createElement("br",null),o.default.createElement("span",null,"github: ",e.githubUsername),o.default.createElement("br",null),o.default.createElement("span",null,"积分: ",e.score,"     注册于: ",(0,i.formatTime)(e.create_at))),o.default.createElement("br",null))},l=function(e){return o.default.createElement(a.Tabs,{style:{marginBottom:"40px"}},o.default.createElement(u,{tab:"最近创建的话题",key:"recent_topics"},e.recent_topics.map(function(e,t){return o.default.createElement("div",{key:e.title+t,className:"recent"},o.default.createElement(c.Link,{className:"user-view-title",to:"/detail/"+e.id},e.title))}),0===e.recent_topics.length?"这个家伙很懒，什么也没留下":""),o.default.createElement(u,{tab:"最近参与的话题",key:"recent_replies"},e.recent_replies.map(function(e,t){return o.default.createElement("div",{key:e.title+t,className:"recent"},o.default.createElement(c.Link,{className:"user-view-title",to:"/detail/"+e.id},e.title),o.default.createElement(c.Link,{to:"/user/"+e.author.loginname},o.default.createElement("img",{src:e.author.avatar_url,className:"avator",alt:e.author.loginname})))}),0===e.recent_replies.length?"这个家伙很懒，什么也没留下":""))};t.UserInfo=s,t.Recent=l},"cZ/O":function(e,t,n){"use strict";function r(e){if(e.status<200||e.status>300)throw new Error("出错了");return e.json()}function o(e,t){return void 0===t?fetch("https://cnodejs.org/api/v1"+e).then(function(e){return r(e)}).catch(function(e){a.message.error("请求失败")}):fetch("https://cnodejs.org/api/v1"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return r(e)}).catch(function(e){a.message.error("请求失败")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n("1cmS")},fB0d:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n("1n8/"),s=r(u),l=n("AWhJ"),f=n("jYI/"),m=n("1cmS"),d=n("YQni"),p=n("cZ/O"),h=r(p),g=n("mF8X"),b=function(e){function t(){var e,n,r,c;o(this,t);for(var i=arguments.length,u=Array(i),s=0;s<i;s++)u[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={position:""},r.getPosition=function(){fetch("http://freegeoip.net/json/").then(function(e){return e.json()}).then(function(e){fetch("http://restapi.amap.com/v3/ip?key=c5c368adb8bb95aac7cab8099f2b716c&ip="+e.ip).then(function(e){return e.json()}).then(function(e){r.setState({position:e.city})})})},r.logout=function(){var e=r.props,t=e.UserLogin,n=e.GetAccessToken,o=e.SetUserStatus;t({}),n(""),o(!0),sessionStorage.removeItem("USER_ON"),sessionStorage.removeItem("Status"),sessionStorage.removeItem("AccessToken"),r.props.history.push("/")},c=n,a(r,c)}return c(t,e),i(t,[{key:"componentWillMount",value:function(){this.getPosition();var e=this.props,t=e.UserLogin;e.OFF||(0,h.default)("/accesstoken",{accesstoken:sessionStorage.AccessToken}).then(function(e){void 0!==e&&(0,h.default)("/user/"+e.loginname).then(function(e){t(e.data),sessionStorage.setItem("USER_ON",JSON.stringify(e.data))}).catch(function(e){m.message.error("网络错误")})})}},{key:"render",value:function(){var e=this.state.position,t=this.props,n=t.UserID,r=t.history,o=t.location;return t.OFF?s.default.createElement("div",null,s.default.createElement(l.Guide,{history:r}),s.default.createElement(l.Tip,{history:r})):s.default.createElement("div",{className:"userView",style:{marginTop:"45px"}},s.default.createElement(l.Guide,{title:"个人中心"},s.default.createElement("i",{id:"position",className:"iconfont icon-dingwei"},e),s.default.createElement(m.Popconfirm,{title:"确认退出?",okText:"退出",cancelText:"取消",onConfirm:this.logout},s.default.createElement("a",{href:"javascript:void(0)",style:{position:"absolute",right:"15px",color:"#fff"},className:"iconfont icon-tuichu"}))),s.default.createElement(d.UserInfo,n),s.default.createElement(d.Recent,n),s.default.createElement(l.Footer,{location:o}))}}]),t}(u.Component),v=function(e){return{UserID:e.SetUserID.UserID,OFF:e.SetUserStatus.OFF}},y=function(e){return{UserLogin:function(t){return e((0,g.UserLogin)(t))},GetAccessToken:function(t){return e((0,g.GetAccessToekn)(t))},SetUserStatus:function(t){return e((0,g.SetUserStatus)(t))}}};t.default=(0,f.connect)(v,y)(b)},rw4d:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t},o=function(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t},a=function(){return"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},c=function(){return Math.abs(r()+a()-o())<1},i=function(e){var t=new Date(e),n=(new Date).getTime()-t.getTime();return n<0?"":n/1e3<60?"刚刚":n/6e4<60?parseInt(n/6e4,10)+"分钟前":n/36e5<24?parseInt(n/36e5,10)+"小时前":n/864e5<31?parseInt(n/864e5,10)+"天前":n/2592e6<12?parseInt(n/2592e6,10)+"月前":parseInt(n/31536e6,10)+"年前"};t.loadMore=c,t.ScrollTop=r,t.WindowHeight=a,t.ScrollHeight=o,t.formatTime=i}});
//# sourceMappingURL=4.7722f91ee49b2e1f5dcc.chunk.js.map