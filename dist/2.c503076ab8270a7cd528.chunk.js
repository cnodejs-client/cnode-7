webpackJsonp([2],{"+WNm":function(e,t,a){t=e.exports=a("lcwS")(void 0),t.push([e.i,".spinner{margin:10px auto;width:25px;height:25px;left:50%;position:fixed;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.container1>div,.container2>div,.container3>div{width:6px;height:6px;background-color:#108ee9;border-radius:50%;position:fixed;-webkit-animation:bouncedelay 1.2s infinite ease-in-out;animation:bouncedelay 1.2s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner .spinner-container{position:fixed;width:100%;height:100%}.container2{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.container3{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.circle1{top:0;left:0}.circle2{top:0;right:0}.circle3{right:0;bottom:0}.circle4{left:0;bottom:0}.container2 .circle1{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.container3 .circle1{-webkit-animation-delay:-1s;animation-delay:-1s}.container1 .circle2{-webkit-animation-delay:-.9s;animation-delay:-.9s}.container2 .circle2{-webkit-animation-delay:-.8s;animation-delay:-.8s}.container3 .circle2{-webkit-animation-delay:-.7s;animation-delay:-.7s}.container1 .circle3{-webkit-animation-delay:-.6s;animation-delay:-.6s}.container2 .circle3{-webkit-animation-delay:-.5s;animation-delay:-.5s}.container3 .circle3{-webkit-animation-delay:-.4s;animation-delay:-.4s}.container1 .circle4{-webkit-animation-delay:-.3s;animation-delay:-.3s}.container2 .circle4{-webkit-animation-delay:-.2s;animation-delay:-.2s}.container3 .circle4{-webkit-animation-delay:-.1s;animation-delay:-.1s}@-webkit-keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes bouncedelay{0%,80%,to{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}",""])},"2hr2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spin=void 0;var n=a("1n8/"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);a("jJrt");var i=function(e){var t={};return t=e.hasOwnProperty("style")?e.style:{top:"45px"},o.default.createElement("div",{className:!0===e.loading?"spinner":"",style:t},o.default.createElement("div",{className:!0===e.loading?"spinner-container container1":""},o.default.createElement("div",{className:"circle1"}),o.default.createElement("div",{className:"circle2"}),o.default.createElement("div",{className:"circle3"}),o.default.createElement("div",{className:"circle4"})),o.default.createElement("div",{className:!0===e.loading?"spinner-container container2":""},o.default.createElement("div",{className:"circle1"}),o.default.createElement("div",{className:"circle2"}),o.default.createElement("div",{className:"circle3"}),o.default.createElement("div",{className:"circle4"})),o.default.createElement("div",{className:!0===e.loading?"spinner-container container3":""},o.default.createElement("div",{className:"circle1"}),o.default.createElement("div",{className:"circle2"}),o.default.createElement("div",{className:"circle3"}),o.default.createElement("div",{className:"circle4"})))};i.Defaultprops={loading:!0},t.Spin=i},"U/8g":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EachTitle=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a("1n8/"),s=n(c),d=a("obMO"),m=a("AWhJ"),u=a("rw4d"),f=a("cZ/O"),p=n(f),h=a("2hr2"),y=function(e){function t(){var e,a,n,r;o(this,t);for(var l=arguments.length,c=Array(l),s=0;s<l;s++)c[s]=arguments[s];return a=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.state={data:[],page:2,refresh:!1,loadmore:!1},n.reload=function(){var e=n.props.location,t=e.pathname,a=e.search,o=t+a,i=n.state,r=i.data,l=i.page;k()&&(n.setState({loadmore:!0}),(0,p.default)(v(o,l)).then(function(e){n.setState({data:r.concat(e.data),page:l+1,loadmore:!1})})),w()&&(n.setState({refresh:!0}),(0,p.default)(v(o)).then(function(e){n.setState({data:e.data,page:2,refresh:!1})}))},r=a,i(n,r)}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location,a=t.pathname,n=t.search,o=a+n;window.onload=function(){(0,p.default)(v(o)).then(function(t){localStorage.setItem(o,JSON.stringify(t.data)),e.setState({data:t.data,page:2})})},void 0!==localStorage[o]&&this.setState({data:JSON.parse(localStorage.getItem(o))}),window.addEventListener("scroll",this.reload)}},{key:"componentWillReceiveProps",value:function(e){var t=this;document.body.scrollTop=0!==document.body.scrollTop?document.body.scrollTop:1;var a=e.location,n=a.pathname,o=a.search,i=n+o;i.indexOf(this.props.location.search)<0&&null===localStorage.getItem(i)?(0,p.default)(v(i)).then(function(e){localStorage.setItem(i,JSON.stringify(e.data)),t.setState({data:e.data})}):this.setState({data:JSON.parse(localStorage.getItem(i))})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.reload)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.refresh,n=e.loadmore,o={marginTop:!0===a?"120px":"82px",marginBottom:!0===n?"120px":"40px"};return s.default.createElement("div",{className:"index",style:o},s.default.createElement("div",{id:"logo"},s.default.createElement("img",{src:"https://o4j806krb.qnssl.com/public/images/cnodejs_light.svg",alt:"cnode标志"})),s.default.createElement(m.Header,{location:this.props.location}),s.default.createElement(h.Spin,{loading:a})," ",0===t.length?s.default.createElement(h.Spin,{loading:!0}):s.default.createElement(g,{data:t}),s.default.createElement("div",{style:{height:"50px"}},s.default.createElement(h.Spin,{loading:n,style:{bottom:"45px"}})),s.default.createElement(m.Footer,{location:this.props.location}))}}]),t}(c.Component),g=t.EachTitle=function(e){return e.data.map(function(e,t){var a=e.id,n=e.top,o=e.tab,i=e.good,r=e.title,l=e.author,c=e.reply_count,m=e.visit_count,f=e.create_at,p=e.last_reply_at;return s.default.createElement("div",{key:a+t,className:"contant fadeInUp animated"},s.default.createElement(d.Link,{className:"title",to:"/detail/"+a},s.default.createElement("i",{className:n?"iconfont icon-top mark":""}),s.default.createElement("i",{className:i?"iconfont icon-good mark":""}),s.default.createElement("i",{className:"share"===o?"iconfont icon-share mark":"job"===o?"iconfont icon-job mark":"iconfont icon-ask mark"}),r),s.default.createElement("br",null),s.default.createElement("div",null,s.default.createElement(d.Link,{to:"/user/"+l.loginname},s.default.createElement("img",{src:l.avatar_url,className:"avator",alt:l.loginname})),s.default.createElement("div",null,s.default.createElement("p",{style:{marginBottom:"13px"}},s.default.createElement("span",{className:"loginname"},l.loginname),s.default.createElement("span",{className:"visted-count"},c,"/",m)),s.default.createElement("span",{className:"create_at"},(0,u.formatTime)(f)),s.default.createElement("span",{className:"last_reply_at"},(0,u.formatTime)(p)))))})},v=function(e,t){return void 0===t?"/topics"===e?e+"?limit=20":e+"&limit=20":"/topics"===e?e+"?page="+t+"&limit=5":e+"&page="+t+"&limit=5"},b=0,E=0,w=function(){return E=b,(b=(0,u.ScrollTop)())<E&&b<1.5},k=function(){return b>E&&Math.abs((0,u.ScrollTop)()+(0,u.WindowHeight)()-(0,u.ScrollHeight)())<3};t.default=y},"cZ/O":function(e,t,a){"use strict";function n(e){if(e.status<200||e.status>300)throw new Error("出错了");return e.json()}function o(e,t){return void 0===t?fetch("https://cnodejs.org/api/v1"+e).then(function(e){return n(e)}).catch(function(e){i.message.error("请求失败")}):fetch("https://cnodejs.org/api/v1"+e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return n(e)}).catch(function(e){i.message.error("请求失败")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a("1cmS")},jJrt:function(e,t,a){var n=a("+WNm");"string"==typeof n&&(n=[[e.i,n,""]]);var o={};o.transform=void 0;a("BMrJ")(n,o);n.locals&&(e.exports=n.locals)},rw4d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t},o=function(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t},i=function(){return"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},r=function(){return Math.abs(n()+i()-o())<1},l=function(e){var t=new Date(e),a=(new Date).getTime()-t.getTime();return a<0?"":a/1e3<60?"刚刚":a/6e4<60?parseInt(a/6e4,10)+"分钟前":a/36e5<24?parseInt(a/36e5,10)+"小时前":a/864e5<31?parseInt(a/864e5,10)+"天前":a/2592e6<12?parseInt(a/2592e6,10)+"月前":parseInt(a/31536e6,10)+"年前"};t.loadMore=r,t.ScrollTop=n,t.WindowHeight=i,t.ScrollHeight=o,t.formatTime=l}});
//# sourceMappingURL=2.c503076ab8270a7cd528.chunk.js.map